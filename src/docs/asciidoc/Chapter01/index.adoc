include::../attribute.adoc[]

[[introduction]]
== はじめに

***
### 目的
このガイドラインでは、クラウドネイティブな開発を実現する上で要となるCloud環境とCI/CD（継続的インテグレーション/デリバリー）ツールを組み合わせた開発の指針を提示します。

***
### 背景
CI/CDツール::
    * CI/CDツールについてはJenkinsが最も有名であり、多くの運用事例がありますが、実運用に足る構成を実現するためには、チューニングに多くの知識が必要となるため、作業の属人化が発生しやすく、また構築難易度・維持コスト共に高くなるという課題があります。
    * 一方で、近年ではTraviceCI、CircleCIと言ったSaaS型のCI/CDツールの運用事例も増えています。
    また、主要なSaaS型ツールはチューニングが設定ファイル1つであることやサービス利用型の特性から、Jenkins運用で懸念される課題を改善することが期待されます。
    * そのため、このガイドラインではCI/CDをSaaS型のツールを利用して実施します。
Cloud環境::
    * 近年のPublicクラウド市場は今だ20％以上の年率で成長していますが、徐々に従来のAWS一強状態からの変化が生まれており、MicrosoftAzureやAlibabaCloudといった脱AWSの選択肢をとる企業も増えてきているため、今後はマルチクラウド対応が求められます。
    * そのため、このガイドラインではAWS以外のCloud環境に対する知見を得る意味も込めてCloud環境として「AlibabaCloud」を利用します。

***
### 前提事項
パイプライン上ではブランチ毎に下記の実行処理は実行することを前提としています。

* issueブランチ（名：[issue]+文字列）
** ビルドチェック
** Junitテスト
** SonarQubeへのJunitテスト結果連携、静的検証

* masterブランチ（名：master）
** ビルドチェック
** Junitテスト
** SonarQubeへのJunitテスト結果連携、静的検証
** Nexusへのライブラリ登録
** 最新のmasterブランチに対してタグ打ち（名：version-X.X.X-SNAPSHOT）

* releaseブランチ（名：release）
** ビルドチェック
** Junitテスト
** Nexusへのライブラリ登録
** 最新のmasterブランチに対してタグ打ち（名：version-X.X.X-RELEASE）

Cloud上の環境は下記を前提としています。

* サーバ構成
** 下記の2つのサーバが立ち上がっている。
*** Webアプリケーション用サーバ
*** SonarQube・Nexus用サーバ

* ネットワーク構成
** 2つのサーバへの接続はロードバランサによるパスルーティングによって振り分けられる。

***
### 全体像
このガイドラインで取り扱う環境の全体像は下図の通りです。

image::network.png[network, 1280]

Cloud環境・CI/CDツール以外の構成要素として、CI/CDの結果を確認する手段として「Slack」を、リソースのバージョン管理ツールとして「GitHub」を利用します。

